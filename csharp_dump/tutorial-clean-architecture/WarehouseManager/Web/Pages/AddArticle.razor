@page "/add-article"
@inject NavigationManager NavigationManager
@inject IArticleService ArticleService
@inject IProcurementService ProcurementService
@inject IEntityService<GroupModel> GroupService
@inject IEntityService<StoragePlaceModel> StoragePlaceService
@inject IEntityService<OperationAreaModel> OperationAreaService

<div class="container border border-dark rounded p-4 mb-5">

    @if (!string.IsNullOrEmpty(Message))
    {
        <p class="text-danger">@Message</p>
    }

    <EditForm Model="@ArticleVM" OnValidSubmit="HandleValidSubmit">
        <div class="d-flex flex-row">
            <div style="width: 33%">
                <div class="border border-dark border-2 mb-4" style="height: 430px">
                    <img src="@ArticleVM.ImageUrl" alt="@ArticleVM.Name" class="w-100 h-100" style="object-fit: cover">
                </div>
            </div>
            <div style="width: 66%" class="d-flex flex-row justify-content-center">
                <div class="w-50">
                    <div class="mb-3">
                        <label class="px-5 form-label">Name:</label>
                        <div class="px-5">
                            <InputText class="form-control" @bind-Value="ArticleVM.Name"></InputText>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Group:</label>
                        <div class="px-5">
                            <InputSelect class="form-control" @bind-Value="ArticleVM.GroupId">
                                <option value="">-- Select --</option>
                                @if (Groups.Count > 0)
                                {
                                    @foreach (var group in Groups)
                                    {
                                        <option value="@group.GroupId">@group.Name</option>
                                    }
                                }
                            </InputSelect>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Storage Place:</label>
                        <div class="px-5">
                            <InputSelect class="form-control" @bind-Value="ArticleVM.StoragePlaceId">
                                <option value="">-- Select --</option>
                                @if (StoragePlaces.Count > 0)
                                {
                                    @foreach (var storagePlace in StoragePlaces)
                                    {
                                        <option value="@storagePlace.StoragePlaceId">@storagePlace.Name</option>
                                    }
                                }
                            </InputSelect>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Storage Bin:</label>
                        <div class="px-5">
                            <InputText class="form-control" @bind-Value="ArticleVM.StorageBin"></InputText>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Operation Area:</label>
                        <div class="px-5">
                            <InputSelect class="form-control" @bind-Value="ArticleVM.OperationAreaId">
                                <option value="">-- Select --</option>
                                @if (OperationAreas.Count > 0)
                                {
                                    @foreach (var operationArea in OperationAreas)
                                    {
                                        <option value="@operationArea.OperationAreaId">@operationArea.Name</option>
                                    }
                                }
                            </InputSelect>
                        </div>
                    </div>
                </div>
                <div class="w-50">
                    <div class="mb-3">
                        <label class="px-5 form-label">Article Id:</label>
                        <div class="px-5">
                            <InputText class="form-control" @bind-Value="ArticleVM.ItemNumber"></InputText>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Procurement:</label>
                        <div class="px-5">
                            <InputSelect class="form-control" @bind-Value="ArticleVM.ProcurementId">
                                <option value="">-- Select --</option>
                                @if (Procurements.Count > 0)
                                {
                                    @foreach (var procurement in Procurements)
                                    {
                                        <option value="@procurement.ProcurementId">@procurement.Name</option>
                                    }
                                }
                            </InputSelect>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Stock:</label>
                        <div class="px-5">
                            <InputNumber class="form-control" @bind-Value="ArticleVM.Stock"></InputNumber>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Min. Stock:</label>
                        <div class="px-5">
                            <InputNumber class="form-control" @bind-Value="ArticleVM.MinStock"></InputNumber>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Image-Url:</label>
                        <div class="px-5">
                            <InputText class="form-control" @bind-Value="ArticleVM.ImageUrl"></InputText>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="px-5 form-label">Shopping-Url:</label>
                        <div class="px-5">
                            <InputText class="form-control" @bind-Value="ArticleVM.ShoppingUrl"></InputText>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <ValidationSummary />
        <DataAnnotationsValidator />
        <p class="text-danger mt-2">@Message</p>
        <button class="btn btn-custom-full mt-5" type="submit">Create</button>
    </EditForm>
</div>
